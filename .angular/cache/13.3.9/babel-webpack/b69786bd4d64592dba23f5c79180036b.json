{"ast":null,"code":"import { VERSION } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"./cropper/component/image-cropper.component\";\nimport * as i3 from \"@angular/common\";\n\nfunction AppComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor() {\n      this.name = 'Angular ' + VERSION.major;\n      this.imageChangedEvent = '';\n      this.croppedImage = '';\n      this.canvasRotation = 0;\n      this.translateH = 0;\n      this.translateV = 0;\n      this.scale = 1;\n      this.aspectRatio = 4 / 3;\n      this.showCropper = false;\n      this.containWithinAspectRatio = false;\n      this.transform = {\n        translateUnit: 'px'\n      };\n      this.loading = false;\n      this.allowMoveImage = false;\n    }\n\n    fileChangeEvent(event) {\n      this.loading = true;\n      this.imageChangedEvent = event;\n    }\n\n    imageCropped(event) {\n      this.croppedImage = event.base64;\n      console.log(event);\n    }\n\n    imageLoaded() {\n      this.showCropper = true;\n      console.log('Image loaded');\n    }\n\n    cropperReady(sourceImageDimensions) {\n      console.log('Cropper ready', sourceImageDimensions);\n      this.loading = false;\n    }\n\n    loadImageFailed() {\n      console.error('Load image failed');\n    }\n\n    rotateLeft() {\n      this.loading = true;\n      setTimeout(() => {\n        this.canvasRotation--;\n        this.flipAfterRotate();\n      });\n    }\n\n    rotateRight() {\n      this.loading = true;\n      setTimeout(() => {\n        this.canvasRotation++;\n        this.flipAfterRotate();\n      });\n    }\n\n    moveLeft() {\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        translateH: ++this.translateH\n      });\n    }\n\n    moveRight() {\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        translateH: --this.translateH\n      });\n    }\n\n    moveTop() {\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        translateV: ++this.translateV\n      });\n    }\n\n    moveBottom() {\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        translateV: --this.translateV\n      });\n    }\n\n    flipAfterRotate() {\n      const flippedH = this.transform.flipH;\n      const flippedV = this.transform.flipV;\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        flipH: flippedV,\n        flipV: flippedH\n      });\n      this.translateH = 0;\n      this.translateV = 0;\n    }\n\n    flipHorizontal() {\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        flipH: !this.transform.flipH\n      });\n    }\n\n    flipVertical() {\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        flipV: !this.transform.flipV\n      });\n    }\n\n    resetImage() {\n      this.scale = 1;\n      this.rotation = 0;\n      this.canvasRotation = 0;\n      this.transform = {\n        translateUnit: 'px'\n      };\n    }\n\n    zoomOut() {\n      this.scale -= .1;\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        scale: this.scale\n      });\n    }\n\n    zoomIn() {\n      this.scale += .1;\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        scale: this.scale\n      });\n    }\n\n    toggleContainWithinAspectRatio() {\n      this.containWithinAspectRatio = !this.containWithinAspectRatio;\n    }\n\n    updateRotation() {\n      this.transform = Object.assign(Object.assign({}, this.transform), {\n        rotate: this.rotation\n      });\n    }\n\n    toggleAspectRatio() {\n      this.aspectRatio = this.aspectRatio === 4 / 3 ? 16 / 5 : 4 / 3;\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)();\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"my-app\"]],\n    decls: 69,\n    vars: 24,\n    consts: [[1, \"image-wrapper\"], [1, \"toolbar\"], [\"type\", \"file\", 3, \"change\"], [\"placeholder\", \"URL to load image\", \"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"version\", \"1.1\", \"id\", \"Capa_1\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\", \"x\", \"0px\", \"y\", \"0px\", \"width\", \"486.805px\", \"height\", \"486.805px\", \"viewBox\", \"0 0 486.805 486.805\", 0, \"xml\", \"space\", \"preserve\", 2, \"enable-background\", \"new 0 0 486.805 486.805\"], [\"d\", \"M261.397,17.983c-88.909,0-167.372,51.302-203.909,129.073L32.072,94.282L0,109.73l52.783,109.565l109.565-52.786\\n\\t\\tl-15.451-32.066L89.82,161.934c30.833-65.308,96.818-108.353,171.577-108.353c104.668,0,189.818,85.154,189.818,189.821\\n\\t\\ts-85.15,189.824-189.818,189.824c-61.631,0-119.663-30.109-155.228-80.539l-29.096,20.521\\n\\t\\tc42.241,59.87,111.143,95.613,184.324,95.613c124.286,0,225.407-101.122,225.407-225.419S385.684,17.983,261.397,17.983z\"], [3, \"click\"], [\"placeholder\", \"Rotation\", \"type\", \"number\", 3, \"ngModel\", \"ngModelChange\"], [1, \"cropper-wrapper\"], [\"backgroundColor\", \"red\", \"format\", \"png\", 3, \"imageChangedEvent\", \"imageURL\", \"maintainAspectRatio\", \"containWithinAspectRatio\", \"aspectRatio\", \"resizeToWidth\", \"cropperMinWidth\", \"onlyScaleDown\", \"roundCropper\", \"canvasRotation\", \"transform\", \"alignImage\", \"allowMoveImage\", \"transformChange\", \"imageCropped\", \"imageLoaded\", \"cropperReady\", \"loadImageFailed\"], [\"class\", \"loader\", 4, \"ngIf\"], [3, \"src\"], [1, \"loader\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"input\", 2);\n        i0.ɵɵlistener(\"change\", function AppComponent_Template_input_change_2_listener($event) {\n          return ctx.fileChangeEvent($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_3_listener($event) {\n          return ctx.imageURL = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"button\");\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(5, \"svg\", 4)(6, \"g\");\n        i0.ɵɵelement(7, \"path\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"g\")(9, \"g\")(10, \"g\")(11, \"g\")(12, \"g\")(13, \"g\")(14, \"g\")(15, \"g\")(16, \"g\")(17, \"g\")(18, \"g\")(19, \"g\")(20, \"g\")(21, \"g\")(22, \"g\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelement(23, \"br\")(24, \"br\")(25, \"br\")(26, \"br\");\n        i0.ɵɵelementStart(27, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_27_listener() {\n          return ctx.rotateLeft();\n        });\n        i0.ɵɵtext(28, \"Rotate left\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_29_listener() {\n          return ctx.rotateRight();\n        });\n        i0.ɵɵtext(30, \"Rotate right\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_31_listener() {\n          return ctx.flipHorizontal();\n        });\n        i0.ɵɵtext(32, \"Flip horizontal\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_33_listener() {\n          return ctx.flipVertical();\n        });\n        i0.ɵɵtext(34, \"Flip vertical\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"br\")(36, \"br\");\n        i0.ɵɵelementStart(37, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_37_listener() {\n          return ctx.toggleContainWithinAspectRatio();\n        });\n        i0.ɵɵtext(38);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_39_listener() {\n          return ctx.toggleAspectRatio();\n        });\n        i0.ɵɵtext(40);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_41_listener() {\n          return ctx.resetImage();\n        });\n        i0.ɵɵtext(42, \"Reset image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"br\")(44, \"br\");\n        i0.ɵɵelementStart(45, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_45_listener($event) {\n          return ctx.rotation = $event;\n        })(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_45_listener() {\n          return ctx.updateRotation();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_46_listener() {\n          return ctx.zoomOut();\n        });\n        i0.ɵɵtext(47, \"Zoom -\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_48_listener() {\n          return ctx.zoomIn();\n        });\n        i0.ɵɵtext(49, \"Zoom +\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(50, \"br\")(51, \"br\");\n        i0.ɵɵelementStart(52, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_52_listener() {\n          return ctx.moveLeft();\n        });\n        i0.ɵɵtext(53, \"move left\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_54_listener() {\n          return ctx.moveRight();\n        });\n        i0.ɵɵtext(55, \"move right\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_56_listener() {\n          return ctx.moveTop();\n        });\n        i0.ɵɵtext(57, \"move top\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(58, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_58_listener() {\n          return ctx.moveBottom();\n        });\n        i0.ɵɵtext(59, \"move bottom\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(60, \"br\")(61, \"br\");\n        i0.ɵɵelementStart(62, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_62_listener() {\n          return ctx.allowMoveImage = !ctx.allowMoveImage;\n        });\n        i0.ɵɵtext(63);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(64, \"br\");\n        i0.ɵɵelementStart(65, \"div\", 8)(66, \"image-cropper\", 9);\n        i0.ɵɵlistener(\"transformChange\", function AppComponent_Template_image_cropper_transformChange_66_listener($event) {\n          return ctx.transform = $event;\n        })(\"imageCropped\", function AppComponent_Template_image_cropper_imageCropped_66_listener($event) {\n          return ctx.imageCropped($event);\n        })(\"imageLoaded\", function AppComponent_Template_image_cropper_imageLoaded_66_listener() {\n          return ctx.imageLoaded();\n        })(\"cropperReady\", function AppComponent_Template_image_cropper_cropperReady_66_listener($event) {\n          return ctx.cropperReady($event);\n        })(\"loadImageFailed\", function AppComponent_Template_image_cropper_loadImageFailed_66_listener() {\n          return ctx.loadImageFailed();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(67, AppComponent_div_67_Template, 2, 0, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(68, \"img\", 11);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.imageURL);\n        i0.ɵɵadvance(35);\n        i0.ɵɵtextInterpolate(ctx.containWithinAspectRatio ? \"Fill Aspect Ratio\" : \"Contain Within Aspect Ratio\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Aspect ratio: \", ctx.aspectRatio === 4 / 3 ? \"4/3\" : \"16/5\", \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.rotation);\n        i0.ɵɵadvance(18);\n        i0.ɵɵtextInterpolate1(\"\", ctx.allowMoveImage ? \"Disable\" : \"Enable\", \" image panning\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵstyleProp(\"display\", ctx.showCropper ? null : \"none\");\n        i0.ɵɵproperty(\"imageChangedEvent\", ctx.imageChangedEvent)(\"imageURL\", ctx.imageURL)(\"maintainAspectRatio\", true)(\"containWithinAspectRatio\", ctx.containWithinAspectRatio)(\"aspectRatio\", ctx.aspectRatio)(\"resizeToWidth\", 128)(\"cropperMinWidth\", 128)(\"onlyScaleDown\", true)(\"roundCropper\", false)(\"canvasRotation\", ctx.canvasRotation)(\"transform\", ctx.transform)(\"alignImage\", \"center\")(\"allowMoveImage\", ctx.allowMoveImage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"border\", ctx.croppedImage ? \"1px solid black\" : \"none\");\n        i0.ɵɵproperty(\"src\", ctx.croppedImage, i0.ɵɵsanitizeUrl);\n      }\n    },\n    directives: [i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgModel, i1.NumberValueAccessor, i2.ImageCropperComponent, i3.NgIf],\n    styles: [\".image-wrapper[_ngcontent-%COMP%]{border:1px solid #ccc;padding:5px}.image-wrapper[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{border:1px solid red;padding:5px}.image-wrapper[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.image-wrapper[_ngcontent-%COMP%]   .svg-icon[_ngcontent-%COMP%]{position:relative;top:.125em;flex-shrink:0;height:1em;width:1em;fill:currentColor;transition:fill .3s}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}